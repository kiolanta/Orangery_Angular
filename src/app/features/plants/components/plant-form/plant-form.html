<div class="form-overlay">
  <div class="form-container">
    <div class="form-header">
      <h2>{{ isEditMode ? 'Edit Plant' : 'Add New Plant' }}</h2>
      <button class="btn-close" (click)="onCancel()">Ã—</button>
    </div>

    <form [formGroup]="plantForm" (ngSubmit)="onSubmit()">
      <div class="form-group">
        <label for="name">Plant Name *</label>
        <input 
          type="text" 
          id="name" 
          formControlName="name"
          [class.invalid]="name?.invalid && name?.touched"
          placeholder="Enter plant name">
        <div class="error-message" *ngIf="name?.invalid && name?.touched">
          <span *ngIf="name?.errors?.['required']">Name is required</span>
          <span *ngIf="name?.errors?.['maxlength']">Maximum 100 characters</span>
        </div>
      </div>

      <div class="form-group">
        <label for="plantingDate">Planting Date *</label>
        <input 
          type="date" 
          id="plantingDate" 
          formControlName="plantingDate"
          [class.invalid]="plantingDate?.invalid && plantingDate?.touched">
        <div class="error-message" *ngIf="plantingDate?.invalid && plantingDate?.touched">
          <span *ngIf="plantingDate?.errors?.['required']">Planting date is required</span>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label for="locationId">Location *</label>
          <select
            id="locationId"
            formControlName="locationId"
            [class.invalid]="locationId?.invalid && locationId?.touched"
          >
            <option value="" disabled>Select location</option>
            <option *ngFor="let loc of locations" [value]="loc.id">{{ loc.name }}</option>
          </select>
          <div class="error-message" *ngIf="locationId?.invalid && locationId?.touched">
            <span *ngIf="locationId?.errors?.['required']">Location is required</span>
          </div>
        </div>

        <div class="form-group">
          <label for="speciesId">Species *</label>
          <select
            id="speciesId"
            formControlName="speciesId"
            [class.invalid]="speciesId?.invalid && speciesId?.touched"
          >
            <option value="" disabled>Select species</option>
            <option *ngFor="let sp of species" [value]="sp.id">{{ sp.name }}</option>
          </select>
          <div class="error-message" *ngIf="speciesId?.invalid && speciesId?.touched">
            <span *ngIf="speciesId?.errors?.['required']">Species is required</span>
          </div>
        </div>
      </div>

      <div class="form-actions">
        <button type="button" class="btn btn-cancel" (click)="onCancel()">Cancel</button>
        <button type="submit" class="btn btn-submit" [disabled]="plantForm.invalid">
          {{ isEditMode ? 'Update' : 'Create' }}
        </button>
      </div>
    </form>
  </div>
</div>
